{"ast":null,"code":"import{OrganizationList,useOrganizationList,useUser}from'@clerk/clerk-react';import React,{useEffect}from'react';import{Link}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const GroupList=()=>{var _userMemberships$data,_userMemberships$data2;const{isLoaded:isUserLoaded,user}=useUser();const{isLoaded:isOrgLoaded,userMemberships,setActive}=useOrganizationList({userMemberships:{infinite:true}});useEffect(()=>{if(isUserLoaded&&isOrgLoaded){console.log('User Memberships:',userMemberships);console.log('Current user:',user);}},[isUserLoaded,isOrgLoaded,userMemberships,user]);if(!isUserLoaded||!isOrgLoaded){return/*#__PURE__*/_jsx(\"div\",{className:\"p-4 text-gray-600\",children:\"Loading groups...\"});}const handleGroupClick=async organization=>{try{await setActive({organization});}catch(error){console.error('Error setting active organization:',error);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"w-full max-w-4xl mx-auto\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-3xl font-bold text-gray-700\",children:\"Your Groups\"}),/*#__PURE__*/_jsx(OrganizationList,{hidePersonal:true,children:/*#__PURE__*/_jsx(OrganizationList.CreateOrganization,{})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid gap-4\",children:[userMemberships===null||userMemberships===void 0?void 0:(_userMemberships$data=userMemberships.data)===null||_userMemberships$data===void 0?void 0:_userMemberships$data.map(membership=>/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-lg shadow-sm hover:shadow-md transition-shadow cursor-pointer\",onClick:()=>handleGroupClick(membership.organization),children:/*#__PURE__*/_jsx(\"div\",{className:\"p-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-grow\",children:[/*#__PURE__*/_jsx(Link,{to:\"/expenses?org=\".concat(membership.organization.id),className:\"text-blue-500 text-lg font-semibold hover:text-blue-600 mb-1 block\",onClick:e=>e.stopPropagation(),children:membership.organization.name}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-gray-500 text-sm\",children:[\"Members: \",membership.organization.membersCount]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-gray-400 text-sm mt-1\",children:[\"Joined: \",new Date(membership.createdAt).toLocaleDateString()]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-right\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-gray-500 text-sm mt-1\",children:[\"Role: \",membership.role]})})]})})},membership.organization.id)),(!(userMemberships!==null&&userMemberships!==void 0&&userMemberships.data)||userMemberships.data.length===0)&&/*#__PURE__*/_jsxs(\"div\",{className:\"text-center p-8 bg-gray-50 rounded-lg\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mb-4\",children:\"You haven't joined any groups yet.\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mb-4\",children:\"Create your first group to get started!\"}),/*#__PURE__*/_jsx(OrganizationList,{children:/*#__PURE__*/_jsx(OrganizationList.CreateOrganization,{})})]}),(userMemberships===null||userMemberships===void 0?void 0:userMemberships.hasNextPage)&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>userMemberships.fetchNext(),disabled:userMemberships.isFetching,className:\"mt-4 w-full bg-gray-100 text-gray-700 py-2 rounded-lg hover:bg-gray-200 transition-colors disabled:opacity-50\",children:userMemberships.isFetching?'Loading...':'Load More Groups'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-8 p-4 bg-gray-100 rounded-lg\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold mb-2\",children:\"Debug Info:\"}),/*#__PURE__*/_jsx(\"pre\",{className:\"text-xs overflow-auto\",children:JSON.stringify({memberships:userMemberships===null||userMemberships===void 0?void 0:(_userMemberships$data2=userMemberships.data)===null||_userMemberships$data2===void 0?void 0:_userMemberships$data2.map(m=>({orgId:m.organization.id,orgName:m.organization.name,role:m.role,membersCount:m.organization.membersCount})),isLoaded:isOrgLoaded,userId:user===null||user===void 0?void 0:user.id},null,2)})]})]});};export default GroupList;","map":{"version":3,"names":["OrganizationList","useOrganizationList","useUser","React","useEffect","Link","jsx","_jsx","jsxs","_jsxs","GroupList","_userMemberships$data","_userMemberships$data2","isLoaded","isUserLoaded","user","isOrgLoaded","userMemberships","setActive","infinite","console","log","className","children","handleGroupClick","organization","error","hidePersonal","CreateOrganization","data","map","membership","onClick","to","concat","id","e","stopPropagation","name","membersCount","Date","createdAt","toLocaleDateString","role","length","hasNextPage","fetchNext","disabled","isFetching","JSON","stringify","memberships","m","orgId","orgName","userId"],"sources":["C:/Users/shaur/OneDrive/Desktop/AiProject/my-react-app/src/components/GroupList.jsx"],"sourcesContent":["import { OrganizationList, useOrganizationList, useUser } from '@clerk/clerk-react';\nimport React, { useEffect } from 'react';\nimport { Link } from 'react-router-dom';\n\nconst GroupList = () => {\n  const { isLoaded: isUserLoaded, user } = useUser();\n  const { \n    isLoaded: isOrgLoaded, \n    userMemberships,\n    setActive \n  } = useOrganizationList({\n    userMemberships: {\n      infinite: true\n    }\n  });\n\n  useEffect(() => {\n    if (isUserLoaded && isOrgLoaded) {\n      console.log('User Memberships:', userMemberships);\n      console.log('Current user:', user);\n    }\n  }, [isUserLoaded, isOrgLoaded, userMemberships, user]);\n\n  if (!isUserLoaded || !isOrgLoaded) {\n    return <div className=\"p-4 text-gray-600\">Loading groups...</div>;\n  }\n\n  const handleGroupClick = async (organization) => {\n    try {\n      await setActive({ organization });\n    } catch (error) {\n      console.error('Error setting active organization:', error);\n    }\n  };\n\n  return (\n    <div className=\"w-full max-w-4xl mx-auto\">\n      <div className=\"flex justify-between items-center mb-6\">\n        <h2 className=\"text-3xl font-bold text-gray-700\">Your Groups</h2>\n        <OrganizationList hidePersonal={true}>\n          <OrganizationList.CreateOrganization />\n        </OrganizationList>\n      </div>\n      \n      <div className=\"grid gap-4\">\n        {userMemberships?.data?.map((membership) => (\n          <div \n            key={membership.organization.id} \n            className=\"bg-white rounded-lg shadow-sm hover:shadow-md transition-shadow cursor-pointer\"\n            onClick={() => handleGroupClick(membership.organization)}\n          >\n            <div className=\"p-6\">\n              <div className=\"flex items-center justify-between\">\n                <div className=\"flex-grow\">\n                  <Link \n                    to={`/expenses?org=${membership.organization.id}`}\n                    className=\"text-blue-500 text-lg font-semibold hover:text-blue-600 mb-1 block\"\n                    onClick={(e) => e.stopPropagation()}\n                  >\n                    {membership.organization.name}\n                  </Link>\n                  <div className=\"text-gray-500 text-sm\">\n                    Members: {membership.organization.membersCount}\n                  </div>\n                  <div className=\"text-gray-400 text-sm mt-1\">\n                    Joined: {new Date(membership.createdAt).toLocaleDateString()}\n                  </div>\n                </div>\n                <div className=\"text-right\">\n                  <div className=\"text-gray-500 text-sm mt-1\">\n                    Role: {membership.role}\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        ))}\n        \n        {(!userMemberships?.data || userMemberships.data.length === 0) && (\n          <div className=\"text-center p-8 bg-gray-50 rounded-lg\">\n            <p className=\"text-gray-600 mb-4\">You haven't joined any groups yet.</p>\n            <p className=\"text-gray-600 mb-4\">Create your first group to get started!</p>\n            <OrganizationList>\n              <OrganizationList.CreateOrganization />\n            </OrganizationList>\n          </div>\n        )}\n\n        {userMemberships?.hasNextPage && (\n          <button\n            onClick={() => userMemberships.fetchNext()}\n            disabled={userMemberships.isFetching}\n            className=\"mt-4 w-full bg-gray-100 text-gray-700 py-2 rounded-lg hover:bg-gray-200 transition-colors disabled:opacity-50\"\n          >\n            {userMemberships.isFetching ? 'Loading...' : 'Load More Groups'}\n          </button>\n        )}\n      </div>\n\n      {/* Debug information */}\n      <div className=\"mt-8 p-4 bg-gray-100 rounded-lg\">\n        <h3 className=\"font-semibold mb-2\">Debug Info:</h3>\n        <pre className=\"text-xs overflow-auto\">\n          {JSON.stringify({\n            memberships: userMemberships?.data?.map(m => ({\n              orgId: m.organization.id,\n              orgName: m.organization.name,\n              role: m.role,\n              membersCount: m.organization.membersCount\n            })),\n            isLoaded: isOrgLoaded,\n            userId: user?.id\n          }, null, 2)}\n        </pre>\n      </div>\n    </div>\n  );\n};\n\nexport default GroupList; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}