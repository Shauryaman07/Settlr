{"ast":null,"code":"import _objectSpread from\"C:/Users/shaur/OneDrive/Desktop/AiProject/my-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{useOrganizationList,useUser}from'@clerk/clerk-react';import React,{useState}from'react';import{useNavigate}from'react-router-dom';import'./CreateGroup.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const CreateGroup=()=>{const{createOrganization}=useOrganizationList();const{user}=useUser();const navigate=useNavigate();const[groupName,setGroupName]=useState('');const[memberEmail,setMemberEmail]=useState('');const[members,setMembers]=useState([]);const[description,setDescription]=useState('');const[isLoading,setIsLoading]=useState(false);const[error,setError]=useState('');const[inviteStatus,setInviteStatus]=useState({});const handleAddMember=()=>{if(memberEmail&&!members.includes(memberEmail)){setMembers([...members,memberEmail]);setMemberEmail('');}};const handleRemoveMember=emailToRemove=>{setMembers(members.filter(email=>email!==emailToRemove));const newInviteStatus=_objectSpread({},inviteStatus);delete newInviteStatus[emailToRemove];setInviteStatus(newInviteStatus);};const sendInvitation=async(organization,email)=>{try{console.log(\"Sending invitation to \".concat(email));// Use inviteMember directly as it was working before\nconst invitation=await organization.inviteMember({emailAddress:email,role:'org:member',redirectUrl:\"\".concat(window.location.origin,\"/dashboard\")});console.log(\"Invitation sent to \".concat(email,\":\"),invitation);setInviteStatus(prev=>_objectSpread(_objectSpread({},prev),{},{[email]:'sent'}));return true;}catch(error){console.error(\"Failed to invite \".concat(email,\":\"),error);setInviteStatus(prev=>_objectSpread(_objectSpread({},prev),{},{[email]:'failed'}));return false;}};const handleSubmit=async e=>{e.preventDefault();setIsLoading(true);setError('');setInviteStatus({});try{// Create the organization\nconst organization=await createOrganization({name:groupName,privateMetadata:{description:description,createdBy:user.id,createdAt:new Date().toISOString()}});console.log(\"Organization created:\",organization);if(organization){// Send invitations to all members\nfor(const email of members){try{await sendInvitation(organization,email);}catch(inviteError){console.error(\"Failed to invite \".concat(email,\":\"),inviteError);}}// Navigate to the new group page instead of expenses\nnavigate(\"/group/\".concat(organization.id));}}catch(err){console.error('Error creating group:',err);setError(err.message||'Failed to create group. Please try again.');}finally{setIsLoading(false);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"create-group-container\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Create a group\"}),/*#__PURE__*/_jsx(\"p\",{className:\"subtitle\",children:\"Start a new group to track bills and IOUs with friends, family, and more.\"}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",children:error}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:groupName,onChange:e=>setGroupName(e.target.value),placeholder:\"Enter a group name\",className:\"group-name-input\",required:true}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-group\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"email\",value:memberEmail,onChange:e=>setMemberEmail(e.target.value),placeholder:\"Invite via email\",className:\"member-input\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:handleAddMember,className:\"add-member-btn\",disabled:!memberEmail||!memberEmail.includes('@'),children:\"+\"})]}),members.length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"members-list\",children:members.map((email,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"member-chip\",children:[email,inviteStatus[email]&&/*#__PURE__*/_jsx(\"span\",{className:\"invite-status \".concat(inviteStatus[email]),children:inviteStatus[email]==='sent'?'✓':'✗'}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>handleRemoveMember(email),className:\"remove-member\",children:\"\\xD7\"})]},index))}),/*#__PURE__*/_jsx(\"textarea\",{value:description,onChange:e=>setDescription(e.target.value),placeholder:\"Tell them why you're adding them to this group...\",className:\"group-description\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"create-group-btn\",disabled:isLoading||!groupName||members.length===0,children:isLoading?'Creating group...':'Create group'})]})]});};export default CreateGroup;","map":{"version":3,"names":["useOrganizationList","useUser","React","useState","useNavigate","jsx","_jsx","jsxs","_jsxs","CreateGroup","createOrganization","user","navigate","groupName","setGroupName","memberEmail","setMemberEmail","members","setMembers","description","setDescription","isLoading","setIsLoading","error","setError","inviteStatus","setInviteStatus","handleAddMember","includes","handleRemoveMember","emailToRemove","filter","email","newInviteStatus","_objectSpread","sendInvitation","organization","console","log","concat","invitation","inviteMember","emailAddress","role","redirectUrl","window","location","origin","prev","handleSubmit","e","preventDefault","name","privateMetadata","createdBy","id","createdAt","Date","toISOString","inviteError","err","message","className","children","onSubmit","type","value","onChange","target","placeholder","required","onClick","disabled","length","map","index"],"sources":["C:/Users/shaur/OneDrive/Desktop/AiProject/my-react-app/src/components/CreateGroup.jsx"],"sourcesContent":["import { useOrganizationList, useUser } from '@clerk/clerk-react';\nimport React, { useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport './CreateGroup.css';\n\nconst CreateGroup = () => {\n  const { createOrganization } = useOrganizationList();\n  const { user } = useUser();\n  const navigate = useNavigate();\n  \n  const [groupName, setGroupName] = useState('');\n  const [memberEmail, setMemberEmail] = useState('');\n  const [members, setMembers] = useState([]);\n  const [description, setDescription] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState('');\n  const [inviteStatus, setInviteStatus] = useState({});\n\n  const handleAddMember = () => {\n    if (memberEmail && !members.includes(memberEmail)) {\n      setMembers([...members, memberEmail]);\n      setMemberEmail('');\n    }\n  };\n\n  const handleRemoveMember = (emailToRemove) => {\n    setMembers(members.filter(email => email !== emailToRemove));\n    const newInviteStatus = { ...inviteStatus };\n    delete newInviteStatus[emailToRemove];\n    setInviteStatus(newInviteStatus);\n  };\n\n  const sendInvitation = async (organization, email) => {\n    try {\n      console.log(`Sending invitation to ${email}`);\n      \n      // Use inviteMember directly as it was working before\n      const invitation = await organization.inviteMember({\n        emailAddress: email,\n        role: 'org:member',\n        redirectUrl: `${window.location.origin}/dashboard`\n      });\n      \n      console.log(`Invitation sent to ${email}:`, invitation);\n      \n      setInviteStatus(prev => ({\n        ...prev,\n        [email]: 'sent'\n      }));\n      \n      return true;\n    } catch (error) {\n      console.error(`Failed to invite ${email}:`, error);\n      setInviteStatus(prev => ({\n        ...prev,\n        [email]: 'failed'\n      }));\n      return false;\n    }\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setIsLoading(true);\n    setError('');\n    setInviteStatus({});\n\n    try {\n      // Create the organization\n      const organization = await createOrganization({\n        name: groupName,\n        privateMetadata: {\n          description: description,\n          createdBy: user.id,\n          createdAt: new Date().toISOString()\n        }\n      });\n\n      console.log(\"Organization created:\", organization);\n\n      if (organization) {\n        // Send invitations to all members\n        for (const email of members) {\n          try {\n            await sendInvitation(organization, email);\n          } catch (inviteError) {\n            console.error(`Failed to invite ${email}:`, inviteError);\n          }\n        }\n\n        // Navigate to the new group page instead of expenses\n        navigate(`/group/${organization.id}`);\n      }\n    } catch (err) {\n      console.error('Error creating group:', err);\n      setError(err.message || 'Failed to create group. Please try again.');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"create-group-container\">\n      <h1>Create a group</h1>\n      <p className=\"subtitle\">Start a new group to track bills and IOUs with friends, family, and more.</p>\n      \n      {error && <div className=\"error-message\">{error}</div>}\n      \n      <form onSubmit={handleSubmit}>\n        <input\n          type=\"text\"\n          value={groupName}\n          onChange={(e) => setGroupName(e.target.value)}\n          placeholder=\"Enter a group name\"\n          className=\"group-name-input\"\n          required\n        />\n\n        <div className=\"input-group\">\n          <input\n            type=\"email\"\n            value={memberEmail}\n            onChange={(e) => setMemberEmail(e.target.value)}\n            placeholder=\"Invite via email\"\n            className=\"member-input\"\n          />\n          <button\n            type=\"button\"\n            onClick={handleAddMember}\n            className=\"add-member-btn\"\n            disabled={!memberEmail || !memberEmail.includes('@')}\n          >\n            +\n          </button>\n        </div>\n\n        {members.length > 0 && (\n          <div className=\"members-list\">\n            {members.map((email, index) => (\n              <div key={index} className=\"member-chip\">\n                {email}\n                {inviteStatus[email] && (\n                  <span className={`invite-status ${inviteStatus[email]}`}>\n                    {inviteStatus[email] === 'sent' ? '✓' : '✗'}\n                  </span>\n                )}\n                <button\n                  type=\"button\"\n                  onClick={() => handleRemoveMember(email)}\n                  className=\"remove-member\"\n                >\n                  ×\n                </button>\n              </div>\n            ))}\n          </div>\n        )}\n\n        <textarea\n          value={description}\n          onChange={(e) => setDescription(e.target.value)}\n          placeholder=\"Tell them why you're adding them to this group...\"\n          className=\"group-description\"\n        />\n\n        <button \n          type=\"submit\" \n          className=\"create-group-btn\"\n          disabled={isLoading || !groupName || members.length === 0}\n        >\n          {isLoading ? 'Creating group...' : 'Create group'}\n        </button>\n      </form>\n    </div>\n  );\n};\n\nexport default CreateGroup; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}